/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java project to get you started.
 * For more details take a look at the Java Quickstart chapter in the Gradle
 * User Manual available at https://docs.gradle.org/5.6.4/userguide/tutorial_java_projects.html
 */

plugins {
    // Apply the java plugin to add support for Java
    id 'java'

    // Apply the application plugin to add support for building a CLI application
    id 'application'
   
}

compileJava {
    options.release = 11
}

version = '1.0'

repositories {
    // Use jcenter for resolving dependencies.
    // You can declare any Maven/Ivy/file repository here.
    mavenCentral()
}

configurations.all {
   exclude group: 'org.slf4j', module: 'slf4j-jdk14'
}

// tag::dependencies[]
dependencies {
    // This dependency is used by the application.
    implementation 'com.refinitiv.ema:ema:3.7.0.0'
    //implementation 'com.refinitiv.eta.valueadd:etaValueAdd:3.7.0.0' 
    implementation 'ch.qos.logback:logback-classic:1.4.6'
    implementation 'ch.qos.logback:logback-core:1.4.6'

    // Use JUnit test framework
    testImplementation 'junit:junit:4.12'
}


application {
    // Define the main class for the application
    mainClassName = 'com.refinitiv.ema.examples.localconsumer.Consumer'
    //mainClassName = 'chapters.introduction.HelloWorld2'
    //mainClassName = 'com.refinitiv.ema.examples.training.iprovider.series100.ex130_MP_UserDispatch.IProvider'
}

// tag::jar[]
jar {
	 manifest {
        attributes "Main-Class": 'com.refinitiv.ema.examples.localconsumer.Consumer'
        //attributes "Main-Class": "chapters.introduction.HelloWorld2"
        //attributes "Main-Class": "com.refinitiv.ema.examples.training.iprovider.series100.ex130_MP_UserDispatch.IProvider"
    }

    from {
        configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) }
    }

    archiveBaseName = 'EMA_Java_Gradle_all'
    archiveVersion =  version
    duplicatesStrategy(DuplicatesStrategy.EXCLUDE)
}
// end::jar[]

task runIProvider(type: JavaExec) {

    dependsOn('compileJava')
    classpath = sourceSets.main.runtimeClasspath
    
    mainClass = 'com.refinitiv.ema.examples.iprovider.IProvider'

    // arguments to pass to the application
    args 'appArg1'
}

task runLocalConsumer(type: JavaExec) {

    dependsOn('compileJava')
    classpath = sourceSets.main.runtimeClasspath
    
    mainClass = 'com.refinitiv.ema.examples.localconsumer.Consumer'

    // arguments to pass to the application
    //args 'appArg1'
}

task runCloudConsumer(type: JavaExec) {

    dependsOn('compileJava')
    classpath = sourceSets.main.runtimeClasspath
    
    mainClass = 'com.refinitiv.ema.examples.cloudconsumer.Consumer'
}


